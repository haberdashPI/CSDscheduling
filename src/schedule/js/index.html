<!DOCTYPE html>
<html lang="en" ng-app="CSDschedule" class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CSD Schedule</title>

  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
-->
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/datatables/media/js/jquery.dataTables.min.js"></script>
<script src="bower_components/angular-datatables/dist/angular-datatables.min.js"></script>  
<script src="app.js"></script>

<link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/normalize.css">
<link rel="stylesheet" href="bower_components/html5-boilerplate/dist/css/main.css">
<link rel="stylesheet" href="bower_components/datatables/media/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="app.css">
<script src="bower_components/html5-boilerplate/dist/js/vendor/modernizr-2.8.3.min.js"></script>

</head>
<body>

  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->

      <div ng-controller="ScheduleController as schedule" id="schedule_list">
        <table class="row-border hover" datatable="ng"
        dt-options="schedule.options">
        <thead>
          <tr>
            <th/>
            <th ng-repeat="time in schedule.data.valid_times | orderBy : '-start' : true"
            class="timerange">
            {{ time.start | date:'h:mm' : 'UTC'}}-
            {{ time.end | date:'h:mm' : 'UTC'}}
          </th>
        </tr>
      </thead>

      <tbody>
        <tr ng-repeat="agent in schedule.data.agents">
          <th>{{agent}}</th>
          <td ng-repeat="time in schedule.data.times[agent]"
              ng-class="{unavailable: !time.available, 
                         selected: isSelected(agent,time)}"
              ng-click="schedule.toggleAvailability(agent,time)"
              class="selectable"> 
            <span ng-hide="time.available">
              &#x2717
            </span>
          </td>
        </tr>

        <tr>
          <th><input type="text" ng-model="new_agent"
                     ng-keypress="schedule.newAgent($event,new_agent)"></th>
          <td ng=repeat="time in schedule.data.valid_times"/>
        </tr>
    </tbody>
  </table>
    <!-- TODO: datatables is getting rid of this DIV, I need
    to have a seperate controller. -->
  </div>
</body>
</html>
